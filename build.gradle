/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * To learn more about Gradle by exploring our Samples at https://docs.gradle.org/8.4/samples
 */
plugins{
    id 'java'
    id 'application'
    id 'maven-publish'
}

jar {
manifest {
    attributes 'Main-Class':'gradleExample.HelloWorld'
}
}

task zip(type: Zip, group:"Archive", description:"Archives sources in a zip file"){
   destinationDirectory = file(".")
   archiveFileName = "backup.zip"
   from "src"
   build.finalizedBy zip, javadoc
 }

 repositories{
    mavenCentral() //para dependÃªncias remotas
    flatDir {
        dirs 'libs'
    }
}

dependencies{
    implementation group: 'joda-time', name: 'joda-time', version: '2.10.12'//remoto
}
/*
publishing {
    publications {
      maven(MavenPublication) {
        groupId = 'com.github.MiguelBarbosa04'
        artifactId = 'library'
        version = '1.2'
      }
    }
    repositories {
        maven {
            credentials {
                username = "MiguelBarbosa04"
                password = "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"
            }
            url = "https://maven.pkg.github.com/MiguelBarbosa04/gradletest"
        }
    }
  }

  task addAndCommit(type: Exec) {
    workingDir = projectDir
    commandLine 'git', 'add', '.'
    commandLine 'git', 'commit', '-m', 'Adicionando arquivos'
}

task pushToGitHub(type: Exec, dependsOn: addAndCommit) {
    workingDir = projectDir
    commandLine 'git', 'push', 'origin', 'master'
}*/
publishing{
    repositories{
        maven{
            name = "GitHubPackages"
            url = "https://github.com/MiguelBarbosa04/-publishing-java-packages-with-gradle.git"
            credentials{
                username = System.getenv("MiguelBarbosa04")
                password = System.getenv("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")
            }
        }
    }
    publications{
        maven(MavenPublication){
            from HelloWorld.java
        }
    }
}